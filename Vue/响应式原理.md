# å“åº”å¼åŽŸç†

## vue2

### Object.defineProperty

```js
let obj = {
  name: "tim",
};

let number = 18;

Object.defineProperty(obj, "age", {
  // value: 18,
  // enumerable: true, // æŽ§åˆ¶å±žæ€§æ˜¯å¦å¯ä»¥è¢«æžšä¸¾ã€é»˜è®¤å€¼ä¸ºfalse
  // writable: true, // æŽ§åˆ¶å±žæ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ï¼Œé»˜è®¤å€¼ä¸ºfalse
  // configurable: true, // æŽ§åˆ¶å±žæ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ï¼Œé»˜è®¤å€¼ä¸ºfalse

  // å½“è¯»å–ageå±žæ€§ï¼Œgetå‡½æ•°ä¼šè¢«è°ƒç”¨ï¼Œä¸”è¿”å›žå€¼ä¸ºageçš„å€¼
  get: function () {
    return number;
  },

  // å½“ä¿®æ”¹ageå±žæ€§ï¼Œsetå‡½æ•°ä¼šè¢«è°ƒç”¨
  set: function (value) {
    number = value;
  },
});

console.log(obj.age); // 18
```

### æ•°æ®ä»£ç†

é€šè¿‡ä¸€ä¸ªå¯¹è±¡ä»£ç†å¯¹å¦ä¸€ä¸ªå¯¹è±¡ä¸­å±žæ€§çš„æ“ä½œï¼ˆè¯»/å†™ï¼‰

```js
let obj1 = { x: 100 };
let obj2 = { y: 120 };

Object.defineProperty(obj2, "x", {
  get: function () {
    return obj1.x;
  },
  set: function (value) {
    obj1.x = value;
  },
});

console.log(obj1.x);
console.log(obj2.x);
```

![æ•°æ®ä»£ç†](./%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86.png)

### å­˜åœ¨é—®é¢˜

- æ–°å¢žå±žæ€§ã€åˆ é™¤å±žæ€§ã€ç•Œé¢ä¸ä¼šæ›´æ–°
- ç›´æŽ¥é€šè¿‡ä¸‹æ ‡ä¿®æ”¹æ•°ç»„ï¼Œç•Œé¢ä¸ä¼šæ›´æ–°

è§£å†³æ–¹æ³•å‚è€ƒï¼š[ðŸ“–](https://v2.cn.vuejs.org/v2/guide/reactivity.html#%E6%A3%80%E6%B5%8B%E5%8F%98%E5%8C%96%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9)

## vue3

### proxy

```js
// æºæ•°æ®
let person = {
  name: "tim",
  age: 18,
};

/*
 * Proxy ä»£ç†å¯¹è±¡ï¼šæ‹¦æˆªå¯¹è±¡ä¸­ä»»æ„å±žæ€§çš„å˜åŒ–ï¼ŒåŒ…æ‹¬ï¼šè¯»å†™ã€æ·»åŠ ã€åˆ é™¤ç­‰
 * Reflect åå°„å¯¹è±¡ï¼šå¯¹è¢«ä»£ç†å¯¹è±¡çš„å±žæ€§è¿›è¡Œæ“ä½œ
 */
const p = new Proxy(person, {
  get(target, propName) {
    // return target[propName];
    return Reflect.get(target[propName]);
  },
  // ä¿®æ”¹ã€æ–°å¢žå±žæ€§éƒ½ä¼šè°ƒç”¨
  set(target, propName, value) {
    // target[propName] = value;
    Reflect.set(target, propName, value);
  },
  deleteProperty(target, propName) {
    // return delete target[propName];
    return Reflect.deleteProperty(target, propName);
  },
});
```

> è§£å†³äº†vue2ä¸­å­˜åœ¨çš„é—®é¢˜
